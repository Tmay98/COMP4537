<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h1>The XMLHttpRequest Object</h1>
<button type="button" onclick="put()">put:update</button>
<button type="button" onclick="getAll()">getAll</button>
<button type="button" onclick="getOne()">getOne</button>
<button type="button" onclick="post()">post</button>
<button type="button" onclick="del()">delete</button>

<div id="demo">
    no response yet!
</div>

<script>
    const patient = { "Patient_ID": "1", "Patient name": "Sarah Melody Brown" };
    const xhttp = new XMLHttpRequest();
    const endPointRoot = "http://localhost:8888/API/v1/";
    let params = "?name=John&age=23";
    let paramsJason = JSON.stringify({name: "Elon Musk SpaceX"});
    let resource = "";

    function put() {
        xhttp.open("PUT", endPointRoot + "patients/1", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.send(paramsJason);
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById("demo").innerHTML =
                    this.responseText
            }
        }
    }

    function post() {
        resource = "patient/";
        xhttp.open("POST", endPointRoot + "patient/", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.send(params);
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById("demo").innerHTML =
                    this.responseText
            }
        }
    }

    function getOne() {
        let id="1";
        resource = "patients/";
        xhttp.open("GET", endPointRoot + resource+id, true);
        xhttp.send();
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById("demo").innerHTML =
                    this.responseText
            }
        }
    }

    function getAll() {
        resource = "patients/";
        xhttp.open("GET", endPointRoot + resource, true);
        xhttp.send();
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById("demo").innerHTML =
                    this.responseText
            }
        }
    }

    function del() {
        resource = "patients/1";
        xhttp.open("DELETE", endPointRoot + "patient/", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.send();
        xhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                document.getElementById("demo").innerHTML =
                    this.responseText
            }
        }
    }


</script>

</body>
</html>